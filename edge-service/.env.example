################################################################################
# Edge Untrunc Service Configuration
#
# Copy this file to .env and modify as needed.
################################################################################

# ==============================================================================
# SMB Mount Configuration
# ==============================================================================

# Path where the SMB share is mounted on the Mac host
# This gets mounted into the container as /data
HOST_SMB_ROOT=/Volumes/mosaic_share

# Container paths (relative to /data)
CONTAINER_SMB_ROOT=/data
READY_DIR=ready
EXPORT_DIR=export
QUARANTINE_DIR=quarantine

# ==============================================================================
# Scanner Configuration
# ==============================================================================

# How often to scan for new files (seconds)
SCAN_INTERVAL_SECONDS=30

# Minimum age before a file is considered stable (seconds)
# Files must be unchanged for this long before processing
MIN_FILE_AGE_SECONDS=60

# Maximum concurrent repair jobs
MAX_CONCURRENT_JOBS=2

# Timeout for each untrunc repair operation (seconds)
UNTRUNC_TIMEOUT_SECONDS=3600

# Reference file selection strategy: "smallest" or "newest"
# - smallest: Use the smallest video file as reference (often a working clip)
# - newest: Use the most recently modified file as reference
REFERENCE_STRATEGY=smallest

# ==============================================================================
# AWS Fallback Configuration
# ==============================================================================

# URL of the AWS repair API (from Terraform output)
# Leave empty to disable AWS fallback
AWS_REPAIR_API_BASE_URL=

# API key for AWS endpoint authentication
AWS_API_KEY=

# Number of retry attempts for AWS fallback
AWS_FALLBACK_RETRIES=3

# ==============================================================================
# Logging
# ==============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Log format: "json" for structured logs, "text" for human-readable
LOG_FORMAT=json

# ==============================================================================
# Service Identification
# ==============================================================================

SERVICE_NAME=edge-untrunc
